<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Comprehensive Guide to Sankey &amp; Alluvial Diagrams with jjsankeyfier â€¢ jjstatsplot</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Comprehensive Guide to Sankey &amp; Alluvial Diagrams with jjsankeyfier">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">jjstatsplot</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.32.01</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/01-introduction.html">jjStatsPlot 01: Statistical Visualization for Pathologists</a></li>
    <li><a class="dropdown-item" href="../articles/01-jamovi-user-guide.html">jamovi User Guide for ClinicoPath</a></li>
    <li><a class="dropdown-item" href="../articles/02-categorical-plots.html">Visualizing Categorical Data with Bar Charts</a></li>
    <li><a class="dropdown-item" href="../articles/03-continuous-comparisons.html">Comparing Paired Data with Within-Subject Plots</a></li>
    <li><a class="dropdown-item" href="../articles/04-continuous-comparisons-alt.html">Continuous Variable Comparisons</a></li>
    <li><a class="dropdown-item" href="../articles/05-correlations-scatterplots.html">Exploring Relationships with Scatter Plots</a></li>
    <li><a class="dropdown-item" href="../articles/06-BBC-style-data-visualization.html">BBC-Style Data Visualization - Professional News Graphics</a></li>
    <li><a class="dropdown-item" href="../articles/06-use-in-r.html">Use jjstatsplot in R</a></li>
    <li><a class="dropdown-item" href="../articles/07-advancedbarplot.html">Advanced Bar Charts - 7 Professional Approaches</a></li>
    <li><a class="dropdown-item" href="../articles/legacy/07-continuous-comparisons-legacy.html">Continuous Variable Comparisons</a></li>
    <li><a class="dropdown-item" href="../articles/08-advancedraincloud.html">Advanced Distribution Visualization with Raincloud Plots</a></li>
    <li><a class="dropdown-item" href="../articles/legacy/08-categorical-plots-legacy.html">Categorical Plot Functions</a></li>
    <li><a class="dropdown-item" href="../articles/09-advancedtree.html">Advanced Decision Tree Analysis in ClinicoPath</a></li>
    <li><a class="dropdown-item" href="../articles/09-analysis-gallery.html">Complete Analysis Gallery - All jjstatsplot Functions</a></li>
    <li><a class="dropdown-item" href="../articles/09-basegraphics.html">Base Graphics Visualization - Fast &amp; Customizable Base R Plots</a></li>
    <li><a class="dropdown-item" href="../articles/legacy/09-continuous-comparisons-legacy.html">Categorical Plot Functions</a></li>
    <li><a class="dropdown-item" href="../articles/legacy/10-correlations-scatterplots-legacy.html">Correlations and Scatter Plots</a></li>
    <li><a class="dropdown-item" href="../articles/legacy/11-introduction-legacy.html">jjstatsplot: Statistical Visualization for Clinical Research</a></li>
    <li><a class="dropdown-item" href="../articles/12-economistplots.html">Economist-Style Distribution Plots - Professional Data Visualization</a></li>
    <li><a class="dropdown-item" href="../articles/13-quick-reference.html">jjstatsplot Plot Gallery</a></li>
    <li><a class="dropdown-item" href="../articles/14-clinical-classification-comprehensive.html">Clinical Classification Analysis with Machine Learning</a></li>
    <li><a class="dropdown-item" href="../articles/14-r-programming-guide.html">R Programming Guide for jjstatsplot</a></li>
    <li><a class="dropdown-item" href="../articles/15-grafify-comprehensive.html">Scientific Visualization with Grafify: Comprehensive Guide</a></li>
    <li><a class="dropdown-item" href="../articles/15-troubleshooting-faq.html">Troubleshooting Guide for ClinicoPath</a></li>
    <li><a class="dropdown-item" href="../articles/16-jcomplexupset-comprehensive.html">Complex UpSet Plot Visualization with jcomplexupset</a></li>
    <li><a class="dropdown-item" href="../articles/17-jextractggstats-comprehensive.html">Statistical Data Extraction from ggstatsplot</a></li>
    <li><a class="dropdown-item" href="../articles/legacy/18-analysis-gallery-legacy.html">Complete Analysis Gallery - All jjstatsplot Functions</a></li>
    <li><a class="dropdown-item" href="../articles/18-jforester-comprehensive.html">Forest Plot Visualization with jforester</a></li>
    <li><a class="dropdown-item" href="../articles/19-jforestmodel-comprehensive.html">Visualizing Regression Models with Forest Plots</a></li>
    <li><a class="dropdown-item" href="../articles/20-jggheatmap-comprehensive.html">Advanced Heatmap Visualization with jggheatmap</a></li>
    <li><a class="dropdown-item" href="../articles/21-jggridges-comprehensive.html">Ridge Plot Visualization with jggridges</a></li>
    <li><a class="dropdown-item" href="../articles/22-jggsankeyfier-comprehensive.html">Comprehensive Guide to Sankey &amp; Alluvial Diagrams with jggsankeyfier</a></li>
    <li><a class="dropdown-item" href="../articles/22-jjsankeyfier-comprehensive.html">Comprehensive Guide to Sankey &amp; Alluvial Diagrams with jjsankeyfier</a></li>
    <li><a class="dropdown-item" href="../articles/23-jggstats-comprehensive.html">Comprehensive Guide to Enhanced Statistical Visualization with jggstats</a></li>
    <li><a class="dropdown-item" href="../articles/23-jjbarstats-comprehensive.html">Comprehensive Bar Chart Analysis with jjbarstats</a></li>
    <li><a class="dropdown-item" href="../articles/legacy/24-jamovi-user-guide-legacy.html">Complete jamovi User Guide for jjstatsplot</a></li>
    <li><a class="dropdown-item" href="../articles/24-jjarcdiagram-comprehensive.html">Network Visualization with jjarcdiagram</a></li>
    <li><a class="dropdown-item" href="../articles/24-jjbetweenstats-comprehensive.html">High-Performance Violin Plot Analysis with jjbetweenstats</a></li>
    <li><a class="dropdown-item" href="../articles/25-jjcorrmat-comprehensive.html">jjcorrmat: Comprehensive Correlation Matrix Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/26-jjdotplotstats-comprehensive.html">jjdotplotstats: Comprehensive Dot Plot Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/27-jjhistostats-comprehensive.html">jjhistostats: Comprehensive Histogram Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/28-jjpiestats-comprehensive.html">jjpiestats: Pie Charts with Performance Optimization and Visualization Best Practices</a></li>
    <li><a class="dropdown-item" href="../articles/29-jjridges-comprehensive.html">jjridges: Comprehensive Ridgeline Plot Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/29-jjridgestats-comprehensive.html">jjridgestats: Comprehensive Ridgeline Plot Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/legacy/29-quick-reference-legacy.html">Quick Reference Guide for jjstatsplot</a></li>
    <li><a class="dropdown-item" href="../articles/30-jjriverplot-comprehensive.html">jjriverplot: Comprehensive River Plot and Flow Visualization</a></li>
    <li><a class="dropdown-item" href="../articles/30-linechart-comprehensive.html">Line Charts for Clinical Time Series and Trend Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/legacy/30-r-programming-guide-legacy.html">R Programming Guide for jjstatsplot</a></li>
    <li><a class="dropdown-item" href="../articles/31-jjscatterstats-comprehensive.html">UNKNOWN TITLE</a></li>
    <li><a class="dropdown-item" href="../articles/31-jpps-comprehensive.html">Predictive Power Score (PPS) Analysis with jpps</a></li>
    <li><a class="dropdown-item" href="../articles/31-jscattermore-comprehensive.html">High-Performance Scatter Plots with jscattermore</a></li>
    <li><a class="dropdown-item" href="../articles/31-lollipop-comprehensive.html">Lollipop Charts for Clinical Categorical Data Visualization</a></li>
    <li><a class="dropdown-item" href="../articles/legacy/31-troubleshooting-faq-legacy.html">Troubleshooting Guide and FAQ for jjstatsplot</a></li>
    <li><a class="dropdown-item" href="../articles/32-jjstreamgraph-comprehensive.html">jjstreamgraph: Comprehensive Interactive Stream Graph Visualization</a></li>
    <li><a class="dropdown-item" href="../articles/32-jsjplot-comprehensive.html">Social Science Statistical Visualization with jsjplot</a></li>
    <li><a class="dropdown-item" href="../articles/33-jjtreemap-comprehensive.html">jjtreemap: Comprehensive Treemap Visualization</a></li>
    <li><a class="dropdown-item" href="../articles/33-jsummarytools-comprehensive.html">Comprehensive Descriptive Statistics with jsummarytools</a></li>
    <li><a class="dropdown-item" href="../articles/34-jjwithinstats-comprehensive.html">jjwithinstats: Comprehensive Within-Subjects Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/34-jviolin-comprehensive.html">Professional Violin Plots with jviolin</a></li>
    <li><a class="dropdown-item" href="../articles/35-jvisr-comprehensive.html">Clinical Research Visualization with jvisr</a></li>
    <li><a class="dropdown-item" href="../articles/36-jwaffle-comprehensive.html">Professional Waffle Charts with jwaffle</a></li>
    <li><a class="dropdown-item" href="../articles/jjstatsplot-01-oncodatasets-examples.html">jjstatsplot: Statistical Visualization with Oncology Data</a></li>
    <li><a class="dropdown-item" href="../articles/use-jjstatsplot-in-R.html">Use jjstatsplot in R</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sbalci/ClinicoPathJamoviModule/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Comprehensive Guide to Sankey &amp; Alluvial Diagrams with jjsankeyfier</h1>
                        <h4 data-toc-skip class="author">ClinicoPath
Package</h4>
            
            <h4 data-toc-skip class="date">2025-10-09</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/sbalci/ClinicoPathJamoviModule/blob/HEAD/vignettes/22-jjsankeyfier-comprehensive.Rmd" class="external-link"><code>vignettes/22-jjsankeyfier-comprehensive.Rmd</code></a></small>
      <div class="d-none name"><code>22-jjsankeyfier-comprehensive.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="sankey-alluvial-diagrams-with-jjsankeyfier">Sankey &amp; Alluvial Diagrams with jjsankeyfier<a class="anchor" aria-label="anchor" href="#sankey-alluvial-diagrams-with-jjsankeyfier"></a>
</h2>
<div class="section level3">
<h3 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h3>
<p>The <code>jjsankeyfier</code> function creates flow diagrams that
visualize how quantities flow between different categories over time or
through different stages. This guide covers three main diagram
types:</p>
<ul>
<li>
<strong>Sankey Diagrams</strong>: Visualize flows between source and
target nodes with thickness proportional to flow magnitude</li>
<li>
<strong>Alluvial Diagrams</strong>: Show how categorical variables
change across multiple dimensions or time points<br>
</li>
<li>
<strong>Parallel Sets</strong>: Alternative representation using
straight lines instead of curves</li>
</ul>
</div>
<div class="section level3">
<h3 id="understanding-flow-diagrams">Understanding Flow Diagrams<a class="anchor" aria-label="anchor" href="#understanding-flow-diagrams"></a>
</h3>
<div class="section level4">
<h4 id="when-to-use-each-type">When to Use Each Type<a class="anchor" aria-label="anchor" href="#when-to-use-each-type"></a>
</h4>
<p><strong>Sankey Diagrams</strong> are ideal for: - Budget allocation
and expenditure flows - Energy consumption patterns - Material flows in
manufacturing - Website traffic patterns - Patient referral pathways</p>
<p><strong>Alluvial Diagrams</strong> excel at showing: - Treatment
progression through multiple stages - Educational pathways and outcomes
- Customer journey mapping - Survey response changes over time -
Multi-step process optimization</p>
<p><strong>Parallel Sets</strong> are useful for: - Categorical data
relationships - Survey response patterns - Classification hierarchies -
Decision tree visualizations</p>
</div>
</div>
<div class="section level3">
<h3 id="basic-usage-examples">Basic Usage Examples<a class="anchor" aria-label="anchor" href="#basic-usage-examples"></a>
</h3>
<div class="section level4">
<h4 id="simple-source-target-flow">Simple Source-Target Flow<a class="anchor" aria-label="anchor" href="#simple-source-target-flow"></a>
</h4>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load test data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"simple_flow_data"</span>, package <span class="op">=</span> <span class="st">"ClinicoPath"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Basic sankey diagram</span></span>
<span><span class="co"># jjsankeyfier(</span></span>
<span><span class="co">#   data = simple_flow_data,</span></span>
<span><span class="co">#   value_var = "flow_amount",</span></span>
<span><span class="co">#   source_var = "from_node", </span></span>
<span><span class="co">#   target_var = "to_node",</span></span>
<span><span class="co">#   diagram_type = "sankey",</span></span>
<span><span class="co">#   plot_title = "Simple Flow Diagram"</span></span>
<span><span class="co"># )</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="multi-level-alluvial-diagram">Multi-Level Alluvial Diagram<a class="anchor" aria-label="anchor" href="#multi-level-alluvial-diagram"></a>
</h4>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load complex data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"complex_alluvial_data"</span>, package <span class="op">=</span> <span class="st">"ClinicoPath"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Multi-level alluvial diagram</span></span>
<span><span class="co"># jjsankeyfier(</span></span>
<span><span class="co">#   data = complex_alluvial_data,</span></span>
<span><span class="co">#   value_var = "revenue",</span></span>
<span><span class="co">#   node_vars = c("level_1", "level_2", "level_3", "level_4"),</span></span>
<span><span class="co">#   diagram_type = "alluvial",</span></span>
<span><span class="co">#   plot_title = "Multi-Level Revenue Flow"</span></span>
<span><span class="co"># )</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="clinical-research-applications">Clinical Research Applications<a class="anchor" aria-label="anchor" href="#clinical-research-applications"></a>
</h3>
<div class="section level4">
<h4 id="treatment-pathway-analysis">Treatment Pathway Analysis<a class="anchor" aria-label="anchor" href="#treatment-pathway-analysis"></a>
</h4>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load treatment pathway data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"treatment_pathways_data"</span>, package <span class="op">=</span> <span class="st">"ClinicoPath"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Visualize treatment progression</span></span>
<span><span class="co"># jjsankeyfier(</span></span>
<span><span class="co">#   data = treatment_pathways_data,</span></span>
<span><span class="co">#   value_var = "patient_count",</span></span>
<span><span class="co">#   node_vars = c("initial_diagnosis", "first_treatment", "response", "final_outcome"),</span></span>
<span><span class="co">#   grouping_var = "age_group",</span></span>
<span><span class="co">#   diagram_type = "alluvial",</span></span>
<span><span class="co">#   color_palette = "viridis",</span></span>
<span><span class="co">#   plot_title = "Cancer Treatment Pathways",</span></span>
<span><span class="co">#   plot_subtitle = "Patient flow through treatment stages",</span></span>
<span><span class="co">#   show_statistics = TRUE,</span></span>
<span><span class="co">#   show_interpretation = TRUE</span></span>
<span><span class="co"># )</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="patient-outcome-flows">Patient Outcome Flows<a class="anchor" aria-label="anchor" href="#patient-outcome-flows"></a>
</h4>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create outcome-focused view</span></span>
<span><span class="co"># jjsankeyfier(</span></span>
<span><span class="co">#   data = treatment_pathways_data,</span></span>
<span><span class="co">#   value_var = "patient_count", </span></span>
<span><span class="co">#   source_var = "response",</span></span>
<span><span class="co">#   target_var = "final_outcome",</span></span>
<span><span class="co">#   grouping_var = "age_group",</span></span>
<span><span class="co">#   diagram_type = "sankey",</span></span>
<span><span class="co">#   color_palette = "set3",</span></span>
<span><span class="co">#   plot_title = "Treatment Response to Final Outcome",</span></span>
<span><span class="co">#   flow_direction = "left_right",</span></span>
<span><span class="co">#   show_labels = TRUE,</span></span>
<span><span class="co">#   show_values = TRUE</span></span>
<span><span class="co"># )</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="business-process-analysis">Business Process Analysis<a class="anchor" aria-label="anchor" href="#business-process-analysis"></a>
</h3>
<div class="section level4">
<h4 id="business-process-optimization">Business Process Optimization<a class="anchor" aria-label="anchor" href="#business-process-optimization"></a>
</h4>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load business process data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"business_process_data"</span>, package <span class="op">=</span> <span class="st">"ClinicoPath"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Analyze process flows</span></span>
<span><span class="co"># jjsankeyfier(</span></span>
<span><span class="co">#   data = business_process_data,</span></span>
<span><span class="co">#   value_var = "process_value",</span></span>
<span><span class="co">#   node_vars = c("department_start", "process_step_1", "process_step_2", "final_outcome"),</span></span>
<span><span class="co">#   grouping_var = "region",</span></span>
<span><span class="co">#   time_var = "quarter", </span></span>
<span><span class="co">#   diagram_type = "alluvial",</span></span>
<span><span class="co">#   color_palette = "plasma",</span></span>
<span><span class="co">#   plot_title = "Business Process Value Flow",</span></span>
<span><span class="co">#   plot_subtitle = "Quarterly process analysis by region",</span></span>
<span><span class="co">#   sort_nodes = "by_value",</span></span>
<span><span class="co">#   value_format = "rounded"</span></span>
<span><span class="co"># )</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="sales-pipeline-analysis">Sales Pipeline Analysis<a class="anchor" aria-label="anchor" href="#sales-pipeline-analysis"></a>
</h4>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Focus on successful outcomes</span></span>
<span><span class="va">successful_processes</span> <span class="op">&lt;-</span> <span class="va">business_process_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">final_outcome</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Closed Won"</span>, <span class="st">"On Hold"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># jjsankeyfier(</span></span>
<span><span class="co">#   data = successful_processes,</span></span>
<span><span class="co">#   value_var = "process_value",</span></span>
<span><span class="co">#   source_var = "department_start",</span></span>
<span><span class="co">#   target_var = "final_outcome",</span></span>
<span><span class="co">#   grouping_var = "quarter",</span></span>
<span><span class="co">#   diagram_type = "sankey",</span></span>
<span><span class="co">#   color_palette = "dark2",</span></span>
<span><span class="co">#   plot_title = "Successful Sales Pipeline",</span></span>
<span><span class="co">#   edge_alpha = 0.8,</span></span>
<span><span class="co">#   node_width = 0.7,</span></span>
<span><span class="co">#   show_values = TRUE,</span></span>
<span><span class="co">#   value_format = "rounded"</span></span>
<span><span class="co"># )</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="educational-data-analysis">Educational Data Analysis<a class="anchor" aria-label="anchor" href="#educational-data-analysis"></a>
</h3>
<div class="section level4">
<h4 id="educational-pathways">Educational Pathways<a class="anchor" aria-label="anchor" href="#educational-pathways"></a>
</h4>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load education data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"education_pathways_data"</span>, package <span class="op">=</span> <span class="st">"ClinicoPath"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Analyze educational progression</span></span>
<span><span class="co"># jjsankeyfier(</span></span>
<span><span class="co">#   data = education_pathways_data,</span></span>
<span><span class="co">#   value_var = "student_count",</span></span>
<span><span class="co">#   node_vars = c("high_school_type", "college_admission", "major_category", "graduation_status"),</span></span>
<span><span class="co">#   grouping_var = "socioeconomic_status",</span></span>
<span><span class="co">#   diagram_type = "alluvial",</span></span>
<span><span class="co">#   color_palette = "pastel1",</span></span>
<span><span class="co">#   plot_title = "Educational Pathway Analysis",</span></span>
<span><span class="co">#   plot_subtitle = "Student progression through education system",</span></span>
<span><span class="co">#   show_interpretation = TRUE,</span></span>
<span><span class="co">#   output_format = "both"</span></span>
<span><span class="co"># )</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="college-admission-outcomes">College Admission Outcomes<a class="anchor" aria-label="anchor" href="#college-admission-outcomes"></a>
</h4>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Focus on college admission patterns</span></span>
<span><span class="co"># jjsankeyfier(</span></span>
<span><span class="co">#   data = education_pathways_data,</span></span>
<span><span class="co">#   value_var = "student_count",</span></span>
<span><span class="co">#   source_var = "high_school_type",</span></span>
<span><span class="co">#   target_var = "college_admission",</span></span>
<span><span class="co">#   grouping_var = "socioeconomic_status",</span></span>
<span><span class="co">#   diagram_type = "parallel_sets",</span></span>
<span><span class="co">#   color_palette = "viridis",</span></span>
<span><span class="co">#   plot_title = "High School to College Transitions",</span></span>
<span><span class="co">#   flow_direction = "left_right",</span></span>
<span><span class="co">#   show_labels = TRUE,</span></span>
<span><span class="co">#   label_size = 10</span></span>
<span><span class="co"># )</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="technology-migration-analysis">Technology Migration Analysis<a class="anchor" aria-label="anchor" href="#technology-migration-analysis"></a>
</h3>
<div class="section level4">
<h4 id="system-migration-flows">System Migration Flows<a class="anchor" aria-label="anchor" href="#system-migration-flows"></a>
</h4>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load technology migration data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"tech_migration_data"</span>, package <span class="op">=</span> <span class="st">"ClinicoPath"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Analyze migration patterns</span></span>
<span><span class="co"># jjsankeyfier(</span></span>
<span><span class="co">#   data = tech_migration_data,</span></span>
<span><span class="co">#   value_var = "migration_cost",</span></span>
<span><span class="co">#   node_vars = c("legacy_system", "migration_phase_1", "migration_phase_2", "implementation"),</span></span>
<span><span class="co">#   grouping_var = "business_unit",</span></span>
<span><span class="co">#   diagram_type = "sankey",</span></span>
<span><span class="co">#   color_palette = "set3",</span></span>
<span><span class="co">#   plot_title = "Technology Migration Analysis",</span></span>
<span><span class="co">#   plot_subtitle = "Cost flow through migration phases",</span></span>
<span><span class="co">#   sort_nodes = "by_value",</span></span>
<span><span class="co">#   value_format = "rounded",</span></span>
<span><span class="co">#   show_statistics = TRUE</span></span>
<span><span class="co"># )</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="advanced-customization">Advanced Customization<a class="anchor" aria-label="anchor" href="#advanced-customization"></a>
</h3>
<div class="section level4">
<h4 id="custom-color-schemes-and-styling">Custom Color Schemes and Styling<a class="anchor" aria-label="anchor" href="#custom-color-schemes-and-styling"></a>
</h4>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Advanced styling example</span></span>
<span><span class="co"># jjsankeyfier(</span></span>
<span><span class="co">#   data = simple_flow_data,</span></span>
<span><span class="co">#   value_var = "flow_value",</span></span>
<span><span class="co">#   source_var = "source",</span></span>
<span><span class="co">#   target_var = "target",</span></span>
<span><span class="co">#   grouping_var = "group",</span></span>
<span><span class="co">#   diagram_type = "alluvial",</span></span>
<span><span class="co">#   color_palette = "viridis",</span></span>
<span><span class="co">#   node_width = 0.8,</span></span>
<span><span class="co">#   edge_alpha = 0.7,</span></span>
<span><span class="co">#   show_labels = TRUE,</span></span>
<span><span class="co">#   label_size = 12,</span></span>
<span><span class="co">#   show_values = TRUE,</span></span>
<span><span class="co">#   value_format = "percent",</span></span>
<span><span class="co">#   plot_title = "Custom Styled Flow Diagram",</span></span>
<span><span class="co">#   plot_subtitle = "Demonstrating advanced styling options",</span></span>
<span><span class="co">#   theme_style = "minimal",</span></span>
<span><span class="co">#   flow_direction = "left_right"</span></span>
<span><span class="co"># )</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="different-flow-directions">Different Flow Directions<a class="anchor" aria-label="anchor" href="#different-flow-directions"></a>
</h4>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Demonstrate different flow directions</span></span>
<span><span class="va">directions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"left_right"</span>, <span class="st">"top_bottom"</span>, <span class="st">"right_left"</span>, <span class="st">"bottom_top"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># for (direction in directions[1:2]) {  # Show first two for brevity</span></span>
<span><span class="co">#   print(</span></span>
<span><span class="co">#     jjsankeyfier(</span></span>
<span><span class="co">#       data = simple_flow_data,</span></span>
<span><span class="co">#       value_var = "flow_amount",</span></span>
<span><span class="co">#       source_var = "from_node",</span></span>
<span><span class="co">#       target_var = "to_node",</span></span>
<span><span class="co">#       diagram_type = "sankey",</span></span>
<span><span class="co">#       flow_direction = direction,</span></span>
<span><span class="co">#       plot_title = paste("Flow Direction:", gsub("_", " to ", direction))</span></span>
<span><span class="co">#     )</span></span>
<span><span class="co">#   )</span></span>
<span><span class="co"># }</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="data-preparation-guidelines">Data Preparation Guidelines<a class="anchor" aria-label="anchor" href="#data-preparation-guidelines"></a>
</h3>
<div class="section level4">
<h4 id="source-target-format">Source-Target Format<a class="anchor" aria-label="anchor" href="#source-target-format"></a>
</h4>
<p>For simple flow diagrams, your data should contain:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example source-target format</span></span>
<span><span class="va">example_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  source <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"B"</span>, <span class="st">"C"</span><span class="op">)</span>,</span>
<span>  target <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"X"</span>, <span class="st">"Y"</span>, <span class="st">"X"</span>, <span class="st">"Z"</span>, <span class="st">"Y"</span><span class="op">)</span>,</span>
<span>  flow_value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">30</span>, <span class="fl">25</span>, <span class="fl">40</span>, <span class="fl">35</span><span class="op">)</span>,</span>
<span>  category <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Type1"</span>, <span class="st">"Type2"</span>, <span class="st">"Type1"</span>, <span class="st">"Type2"</span>, <span class="st">"Type1"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">example_data</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="multi-node-format">Multi-Node Format<a class="anchor" aria-label="anchor" href="#multi-node-format"></a>
</h4>
<p>For alluvial diagrams with multiple stages:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example multi-node format  </span></span>
<span><span class="va">example_alluvial</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  stage_1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Start_A"</span>, <span class="st">"Start_B"</span>, <span class="st">"Start_A"</span>, <span class="st">"Start_C"</span><span class="op">)</span>,</span>
<span>  stage_2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Mid_X"</span>, <span class="st">"Mid_Y"</span>, <span class="st">"Mid_Z"</span>, <span class="st">"Mid_X"</span><span class="op">)</span>, </span>
<span>  stage_3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"End_1"</span>, <span class="st">"End_2"</span>, <span class="st">"End_1"</span>, <span class="st">"End_3"</span><span class="op">)</span>,</span>
<span>  value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">75</span>, <span class="fl">50</span>, <span class="fl">25</span><span class="op">)</span>,</span>
<span>  group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Group1"</span>, <span class="st">"Group2"</span>, <span class="st">"Group1"</span>, <span class="st">"Group3"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">example_alluvial</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="interpreting-flow-diagrams">Interpreting Flow Diagrams<a class="anchor" aria-label="anchor" href="#interpreting-flow-diagrams"></a>
</h3>
<div class="section level4">
<h4 id="key-elements-to-analyze">Key Elements to Analyze<a class="anchor" aria-label="anchor" href="#key-elements-to-analyze"></a>
</h4>
<ol style="list-style-type: decimal">
<li>
<strong>Flow Thickness</strong>: Proportional to the magnitude of
flow between nodes</li>
<li>
<strong>Node Size</strong>: Represents total flow through that
node</li>
<li>
<strong>Color Coding</strong>: Groups flows by categories or
highlights patterns</li>
<li>
<strong>Flow Convergence</strong>: Multiple sources feeding into
single targets</li>
<li>
<strong>Flow Divergence</strong>: Single sources splitting into
multiple targets</li>
</ol>
</div>
<div class="section level4">
<h4 id="statistical-insights">Statistical Insights<a class="anchor" aria-label="anchor" href="#statistical-insights"></a>
</h4>
<p>The function provides automatic statistics including:</p>
<ul>
<li>Total flow volume</li>
<li>Mean and median flow sizes</li>
<li>Number of distinct flows</li>
<li>Maximum and minimum flows</li>
<li>Flow distribution patterns</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example with statistics enabled</span></span>
<span><span class="co"># jjsankeyfier(</span></span>
<span><span class="co">#   data = simple_flow_data,</span></span>
<span><span class="co">#   value_var = "flow_amount",</span></span>
<span><span class="co">#   source_var = "from_node",</span></span>
<span><span class="co">#   target_var = "to_node",</span></span>
<span><span class="co">#   diagram_type = "sankey",</span></span>
<span><span class="co">#   show_statistics = TRUE,</span></span>
<span><span class="co">#   show_interpretation = TRUE,</span></span>
<span><span class="co">#   output_format = "both"</span></span>
<span><span class="co"># )</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="common-use-cases-in-healthcare">Common Use Cases in Healthcare<a class="anchor" aria-label="anchor" href="#common-use-cases-in-healthcare"></a>
</h3>
<div class="section level4">
<h4 id="clinical-decision-pathways">Clinical Decision Pathways<a class="anchor" aria-label="anchor" href="#clinical-decision-pathways"></a>
</h4>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create synthetic clinical decision data</span></span>
<span><span class="va">clinical_decisions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  presentation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Chest Pain"</span>, <span class="st">"Shortness of Breath"</span>, <span class="st">"Fatigue"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>,</span>
<span>  initial_test <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ECG"</span>, <span class="st">"Chest X-ray"</span>, <span class="st">"Blood Work"</span>, <span class="st">"Echo"</span><span class="op">)</span>, <span class="fl">150</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  diagnosis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Cardiac"</span>, <span class="st">"Pulmonary"</span>, <span class="st">"Other"</span>, <span class="st">"Normal"</span><span class="op">)</span>, <span class="fl">150</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  treatment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Medication"</span>, <span class="st">"Surgery"</span>, <span class="st">"Monitoring"</span>, <span class="st">"Discharge"</span><span class="op">)</span>, <span class="fl">150</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  patient_count <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Aggregate data</span></span>
<span><span class="va">clinical_summary</span> <span class="op">&lt;-</span> <span class="va">clinical_decisions</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">presentation</span>, <span class="va">initial_test</span>, <span class="va">diagnosis</span>, <span class="va">treatment</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>patient_count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">patient_count</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># jjsankeyfier(</span></span>
<span><span class="co">#   data = clinical_summary,</span></span>
<span><span class="co">#   value_var = "patient_count",</span></span>
<span><span class="co">#   node_vars = c("presentation", "initial_test", "diagnosis", "treatment"),</span></span>
<span><span class="co">#   diagram_type = "alluvial",</span></span>
<span><span class="co">#   color_palette = "viridis",</span></span>
<span><span class="co">#   plot_title = "Clinical Decision Pathway Analysis",</span></span>
<span><span class="co">#   plot_subtitle = "Patient flow through diagnostic and treatment stages"</span></span>
<span><span class="co"># )</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="hospital-department-transfers">Hospital Department Transfers<a class="anchor" aria-label="anchor" href="#hospital-department-transfers"></a>
</h4>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create hospital transfer data</span></span>
<span><span class="va">hospital_transfers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  admission_dept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Emergency"</span>, <span class="st">"Cardiology"</span>, <span class="st">"Surgery"</span>, <span class="st">"Medicine"</span><span class="op">)</span>, <span class="fl">200</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  transfer_dept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ICU"</span>, <span class="st">"Step-down"</span>, <span class="st">"General Ward"</span>, <span class="st">"Discharge"</span><span class="op">)</span>, <span class="fl">200</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  los_days <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">14</span>, <span class="fl">200</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  severity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Low"</span>, <span class="st">"Medium"</span>, <span class="st">"High"</span><span class="op">)</span>, <span class="fl">200</span>, replace <span class="op">=</span> <span class="cn">TRUE</span>, prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0.3</span>, <span class="fl">0.2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Aggregate by severity</span></span>
<span><span class="va">transfer_summary</span> <span class="op">&lt;-</span> <span class="va">hospital_transfers</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">admission_dept</span>, <span class="va">transfer_dept</span>, <span class="va">severity</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>patient_count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>, avg_los <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">los_days</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># jjsankeyfier(</span></span>
<span><span class="co">#   data = transfer_summary,</span></span>
<span><span class="co">#   value_var = "patient_count",</span></span>
<span><span class="co">#   source_var = "admission_dept",</span></span>
<span><span class="co">#   target_var = "transfer_dept",</span></span>
<span><span class="co">#   grouping_var = "severity",</span></span>
<span><span class="co">#   diagram_type = "sankey",</span></span>
<span><span class="co">#   color_palette = "plasma",</span></span>
<span><span class="co">#   plot_title = "Hospital Department Transfers",</span></span>
<span><span class="co">#   plot_subtitle = "Patient flow between departments by severity",</span></span>
<span><span class="co">#   show_values = TRUE,</span></span>
<span><span class="co">#   show_interpretation = TRUE</span></span>
<span><span class="co"># )</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="performance-optimization">Performance Optimization<a class="anchor" aria-label="anchor" href="#performance-optimization"></a>
</h3>
<div class="section level4">
<h4 id="large-dataset-handling">Large Dataset Handling<a class="anchor" aria-label="anchor" href="#large-dataset-handling"></a>
</h4>
<p>For large datasets (&gt;10,000 flows), consider:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Data Aggregation</strong>: Pre-aggregate similar flows</li>
<li>
<strong>Filtering</strong>: Focus on significant flows only</li>
<li>
<strong>Sampling</strong>: Use representative subsets for
exploration</li>
</ol>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example of data aggregation for performance</span></span>
<span><span class="va">large_dataset_simulation</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  source <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Source_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span>, <span class="fl">5000</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  target <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Target_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span>, <span class="fl">5000</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span>, <span class="fl">5000</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Aggregate to reduce complexity</span></span>
<span><span class="va">aggregated_data</span> <span class="op">&lt;-</span> <span class="va">large_dataset_simulation</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">source</span>, <span class="va">target</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>total_value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span>, flow_count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">total_value</span> <span class="op">&gt;=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">total_value</span>, <span class="fl">0.75</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Focus on top 25% of flows</span></span>
<span></span>
<span><span class="co"># jjsankeyfier(</span></span>
<span><span class="co">#   data = aggregated_data,</span></span>
<span><span class="co">#   value_var = "total_value", </span></span>
<span><span class="co">#   source_var = "source",</span></span>
<span><span class="co">#   target_var = "target",</span></span>
<span><span class="co">#   diagram_type = "sankey",</span></span>
<span><span class="co">#   plot_title = "Optimized Large Dataset Visualization",</span></span>
<span><span class="co">#   plot_subtitle = "Showing top 25% of flows by value"</span></span>
<span><span class="co"># )</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="troubleshooting-guide">Troubleshooting Guide<a class="anchor" aria-label="anchor" href="#troubleshooting-guide"></a>
</h3>
<div class="section level4">
<h4 id="common-issues-and-solutions">Common Issues and Solutions<a class="anchor" aria-label="anchor" href="#common-issues-and-solutions"></a>
</h4>
<p><strong>Issue</strong>: â€œNo flows to displayâ€ -
<strong>Solution</strong>: Check that value variable contains positive
numbers - <strong>Solution</strong>: Verify source/target or node
variables are properly specified</p>
<p><strong>Issue</strong>: â€œOverlapping labelsâ€ -
<strong>Solution</strong>: Adjust <code>label_size</code> parameter -
<strong>Solution</strong>: Use <code>show_labels = FALSE</code> for
complex diagrams - <strong>Solution</strong>: Try different
<code>flow_direction</code> settings</p>
<p><strong>Issue</strong>: â€œToo many categoriesâ€ -
<strong>Solution</strong>: Aggregate low-frequency categories into
â€œOtherâ€ - <strong>Solution</strong>: Filter to show only significant
flows - <strong>Solution</strong>: Use multi-level grouping</p>
<p><strong>Issue</strong>: â€œMemory issues with large dataâ€ -
<strong>Solution</strong>: Pre-aggregate data before visualization -
<strong>Solution</strong>: Sample representative subset -
<strong>Solution</strong>: Filter to top N flows by value</p>
</div>
<div class="section level4">
<h4 id="data-quality-checks">Data Quality Checks<a class="anchor" aria-label="anchor" href="#data-quality-checks"></a>
</h4>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Function to check data quality for flow diagrams</span></span>
<span><span class="va">check_flow_data</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">value_var</span>, <span class="va">source_var</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">target_var</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">node_vars</span> <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Data Quality Assessment for Flow Diagram\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"==========================================\n\n"</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Basic data info</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Dataset dimensions:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span>, <span class="st">"rows,"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span>, <span class="st">"columns\n\n"</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Check value variable</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">value_var</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">values</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[[</span><span class="va">value_var</span><span class="op">]</span><span class="op">]</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Value Variable ("</span>, <span class="va">value_var</span>, <span class="st">"):\n"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  - Non-missing values:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">values</span><span class="op">)</span><span class="op">)</span>, <span class="st">"/"</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">values</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  - Range:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">values</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="st">"to"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">values</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  - Zero values:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">values</span> <span class="op">==</span> <span class="fl">0</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  - Negative values:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">values</span> <span class="op">&lt;</span> <span class="fl">0</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="st">"\n\n"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="co"># Check source-target format</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">source_var</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">target_var</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Source-Target Format:\n"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  - Unique sources:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">data</span><span class="op">[[</span><span class="va">source_var</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  - Unique targets:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">data</span><span class="op">[[</span><span class="va">target_var</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  - Total unique flows:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">source_var</span>, <span class="va">target_var</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>, <span class="st">"\n\n"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="co"># Check multi-node format</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">node_vars</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Multi-Node Format:\n"</span><span class="op">)</span></span>
<span>    <span class="kw">for</span> <span class="op">(</span><span class="va">var</span> <span class="kw">in</span> <span class="va">node_vars</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  -"</span>, <span class="va">var</span>, <span class="st">"unique values:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">data</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Example usage</span></span>
<span><span class="fu">check_flow_data</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">simple_flow_data</span>,</span>
<span>  value_var <span class="op">=</span> <span class="st">"flow_amount"</span>,</span>
<span>  source_var <span class="op">=</span> <span class="st">"from_node"</span>, </span>
<span>  target_var <span class="op">=</span> <span class="st">"to_node"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="best-practices">Best Practices<a class="anchor" aria-label="anchor" href="#best-practices"></a>
</h3>
<div class="section level4">
<h4 id="design-principles">Design Principles<a class="anchor" aria-label="anchor" href="#design-principles"></a>
</h4>
<ol style="list-style-type: decimal">
<li>
<strong>Clarity</strong>: Keep diagrams simple and focused</li>
<li>
<strong>Color Harmony</strong>: Use consistent color schemes</li>
<li>
<strong>Proportionality</strong>: Ensure flow thickness accurately
represents magnitude</li>
<li>
<strong>Labeling</strong>: Provide clear, concise labels</li>
<li>
<strong>Context</strong>: Include titles and subtitles for
interpretation</li>
</ol>
</div>
<div class="section level4">
<h4 id="analytical-workflow">Analytical Workflow<a class="anchor" aria-label="anchor" href="#analytical-workflow"></a>
</h4>
<ol style="list-style-type: decimal">
<li>
<strong>Data Exploration</strong>: Start with summary
statistics</li>
<li>
<strong>Simple Visualization</strong>: Begin with basic
diagrams</li>
<li>
<strong>Iterative Refinement</strong>: Add complexity gradually</li>
<li>
<strong>Validation</strong>: Cross-check with source data</li>
<li>
<strong>Interpretation</strong>: Focus on key insights and
patterns</li>
</ol>
</div>
</div>
<div class="section level3">
<h3 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h3>
<p>The <code>jjsankeyfier</code> function provides powerful capabilities
for visualizing flow data across multiple domains. Whether analyzing
clinical pathways, business processes, or educational outcomes, these
diagrams offer intuitive ways to understand complex relationships and
identify optimization opportunities.</p>
<p>Key takeaways:</p>
<ul>
<li>Choose diagram type based on data structure and analysis goals</li>
<li>Use appropriate aggregation for complex datasets<br>
</li>
<li>Customize visual elements to enhance clarity</li>
<li>Validate visualizations against source data</li>
<li>Focus on actionable insights from flow patterns</li>
</ul>
<p>For additional examples and advanced techniques, explore the
comprehensive test datasets included with the package.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Serdar Balci.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
